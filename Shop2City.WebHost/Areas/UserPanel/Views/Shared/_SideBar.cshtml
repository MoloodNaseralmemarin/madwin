@inject IUserPanelService UserPanelService
@inject IPermissionService PermissionService
@inject IFactorService FactorService
@inject IOrderService OrderService

@{ 
    var user = UserPanelService.GetSideBarUserPanelData(User.Identity.Name);
}
<aside id="column-right" class="col-sm-3">

    <div class="list-group">
        <p class="text-center">عضویت : @user.registerDate.ToShamsi()</p>
        <p class="text-center">@user.fullName</p>
       
        <hr />
        <h3 class="subtitle">داشبورد</h3>
        @if (PermissionService.CheckPermission(1, User.Identity.Name))
        {
            <ul class="list-item">
                <li><a href="/Admin/Index"> مدیریت سایت </a></li>
                <li><a asp-controller="Account" asp-action="Logout">خروج از حساب کاربری</a></li>
            </ul>
        }
        else
        {
            <ul class="list-item">
                <li>
                    <a href="/UserPanel/Factors/FactorForUser"> مشاهده فاکتورها</a>
                    <ul>
                        <li>
                            <a href="/UserPanel/Factors/FactorForUser?isfinaly=true"> فاکتورهای پرداخت شده &nbsp;<span class="badge rounded-pill btn-success">@FactorService.GetCountFactorIsFinaly(User.Identity.Name)</span></a>
                        </li>
                    </ul>
                    </li>
                <li>
                    <a href="/UserPanel/Orders/OrderForUser"> مشاهده سفارش ها</a>
                    <ul>
                        <li>
                            <a href="/UserPanel/Orders/OrderForUser?isfinaly=true"> سفارش های پرداخت شده &nbsp;<span class="badge rounded-pill btn-success">@OrderService.GetCountOrderIsFinaly(User.Identity.Name)</span></a>
                        </li>
                    </ul>
                </li>
                <li><a asp-controller="Account" asp-action="Logout">خروج از حساب کاربری</a></li>
            </ul>
        }

      
    </div>
</aside>
